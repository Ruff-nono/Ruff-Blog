[{"content":"1ã€ä»€ä¹ˆæ˜¯gin Gin æ˜¯ä¸€ä¸ªç”¨Go (Golang)ç¼–å†™çš„ å¼€æºweb æ¡†æ¶ã€‚ ç›®å‰åœ¨GitHub Start 47.4K, å®ƒæ˜¯ä¸€ä¸ªç±»ä¼¼äº martini ä½†æ‹¥æœ‰æ›´å¥½æ€§èƒ½çš„ API æ¡†æ¶ï¼Œ è·¯ç”±è§£æç”±äºä½¿ç”¨çš„æ˜¯httprouterï¼Œé€Ÿåº¦æé«˜äº†è¿‘ 40 å€ã€‚\n2ã€å®‰è£… go get -u github.com/gin-gonic/gin ä»£ç ä¸­å¯¼å…¥\nimport \u0026#34;github.com/gin-gonic/gin\u0026#34; //ï¼ˆå¯é€‰ï¼‰å¯¼å…¥net/http. ä¾‹å¦‚ï¼Œå¦‚æœä½¿ç”¨å¸¸é‡ï¼Œä¾‹å¦‚http.StatusOK. import \u0026#34;net/http\u0026#34; 3ã€å¯åŠ¨æœåŠ¡ package main import ( \u0026#34;net/http\u0026#34; \u0026#34;github.com/gin-gonic/gin\u0026#34; ) func main() { r := gin.Default() r.GET(\u0026#34;/ping\u0026#34;, func(c *gin.Context) { c.JSON(http.StatusOK, gin.H{ \u0026#34;message\u0026#34;: \u0026#34;pong\u0026#34;, }) }) r.Run() // listen and serve on 0.0.0.0:8080 (for windows \u0026#34;localhost:8080\u0026#34;) } 4ã€è®¿é—® D:\\\u0026gt;curl localhost:8080/ping {\u0026#34;message\u0026#34;:\u0026#34;pong\u0026#34;} ","permalink":"http://localhost:1313/posts/tech/gin/1-start/","summary":"1ã€ä»€ä¹ˆæ˜¯gin Gin æ˜¯ä¸€ä¸ªç”¨Go (Golang)ç¼–å†™çš„ å¼€æºweb æ¡†æ¶ã€‚ ç›®å‰åœ¨GitHub Start 47.4K, å®ƒæ˜¯ä¸€ä¸ªç±»ä¼¼äº martini ä½†æ‹¥æœ‰æ›´å¥½æ€§èƒ½çš„ API æ¡†æ¶ï¼Œ è·¯ç”±è§£æç”±","title":"ginæ¡†æ¶(ä¸€)ã€å¿«é€Ÿå…¥é—¨"},{"content":"1ã€æœåŠ¡å¯åŠ¨è¿‡ç¨‹ func main() { r := gin.Default() r.GET(\u0026#34;/ping\u0026#34;, func(c *gin.Context) { c.JSON(http.StatusOK, gin.H{ \u0026#34;message\u0026#34;: \u0026#34;pong\u0026#34;, }) }) r.Run() } 1. gin.Default() gin.Default() å‡½æ•°ä¼šç”Ÿæˆä¸€ä¸ªé»˜è®¤çš„ Engine å¯¹è±¡ï¼Œé‡Œé¢åŒ…å«äº† 2 ä¸ªé»˜è®¤çš„å¸¸ç”¨æ’ä»¶ï¼Œåˆ†åˆ«æ˜¯ Logger å’Œ Recoveryï¼ŒLogger ç”¨äºè¾“å‡ºè¯·æ±‚æ—¥å¿—ï¼Œ Recovery ç¡®ä¿å•ä¸ªè¯·æ±‚å‘ç”Ÿ panic æ—¶è®°å½•å¼‚å¸¸å †æ ˆæ—¥å¿—ï¼Œè¾“å‡ºç»Ÿä¸€çš„é”™è¯¯å“åº”ã€‚\n// Default returns an Engine instance with the Logger and Recovery middleware already attached. func Default() *Engine { // è¾“å‡ºdebugæ—¥å¿— debugPrintWARNINGDefault() // åˆ›å»ºä¸€ä¸ªé»˜è®¤æ— è·¯ç”±æ— ä¸­é—´ä»¶çš„å¼•æ“ engine := New() // é»˜è®¤æ³¨å†Œå…¨å±€æ—¥å¿—å’Œå¼‚å¸¸æ•è·ä¸­é—´ä»¶ engine.Use(Logger(), Recovery()) return engine } Ginæ¡†æ¶ä¸­æ³¨å†Œä¸­é—´ä»¶æ˜¯é€šè¿‡ engine.Use(xx)çš„æ–¹å¼ã€‚\nginModeåˆ†ä¸ºä¸‰ç§åœºæ™¯ä¸‹çš„æ¨¡å¼ï¼Œé»˜è®¤ä¸ºdebugæ¨¡å¼ï¼Œå¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡æˆ–ä»£ç å£°æ˜çš„æ–¹å¼ä¿®æ”¹æ¨¡å¼\ndebugCode = iota releaseCode testCode [GIN-debug] [WARNING] Running in \u0026#34;debug\u0026#34; mode. Switch to \u0026#34;release\u0026#34; mode in production. - using env: export GIN_MODE=release - using code: gin.SetMode(gin.ReleaseMode) 2. engine.GET() router.Handle(httpMethod, relativePath, handlers) ç”¨æ¥åˆ›å»ºè·¯ç”±ï¼ŒåŒæ—¶æ¡†æ¶æä¾›äº† GET, POST ç­‰ç®€å•æ–¹æ³•ï¼ŒrelativePath å’Œ handlers åˆ†åˆ«ä¸ router ä¸­ basePath ã€handlers å…±åŒç»„æˆæœ€ç»ˆçš„ absolutePath å’Œ handlersã€‚\n// Unless otherwise noted, these are defined in RFC 7231 section 4.3. const ( MethodGet = \u0026#34;GET\u0026#34; MethodHead = \u0026#34;HEAD\u0026#34; MethodPost = \u0026#34;POST\u0026#34; MethodPut = \u0026#34;PUT\u0026#34; MethodPatch = \u0026#34;PATCH\u0026#34; // RFC 5789 MethodDelete = \u0026#34;DELETE\u0026#34; MethodConnect = \u0026#34;CONNECT\u0026#34; MethodOptions = \u0026#34;OPTIONS\u0026#34; MethodTrace = \u0026#34;TRACE\u0026#34; ) // GET is a shortcut for router.Handle(\u0026#34;GET\u0026#34;, path, handle). // æ³¨å†Œä¸€ä¸ªåŒ¹é…è·¯å¾„ä¸º relativePath çš„GETè¯·æ±‚è·¯ç”± func (group *RouterGroup) GET(relativePath string, handlers ...HandlerFunc) IRoutes { return group.handle(http.MethodGet, relativePath, handlers) } // ----- func (group *RouterGroup) handle(httpMethod, relativePath string, handlers HandlersChain) IRoutes { //ä»¥\u0026#39;/\u0026#39;è¿æ¥group.basePath ä¸ relativePath absolutePath := group.calculateAbsolutePath(relativePath) // åˆå¹¶ group.Handlers ä¸ handlers handlers = group.combineHandlers(handlers) // å°†è¯·æ±‚è·¯ç”±æ·»åŠ åˆ°engineä¸­ group.engine.addRoute(httpMethod, absolutePath, h andlers) return group.returnObj() } 3. engine.Run() // Run attaches the router to a http.Server and starts listening and serving HTTP requests. // It is a shortcut for http.ListenAndServe(addr, router) // Note: this method will block the calling goroutine indefinitely unless an error happens. func (engine *Engine) Run(addr ...string) (err error) { // æ‰“å°erroræ—¥å¿— defer func() { debugPrintError(err) }() // æˆ‘ä»¬å¯ä»¥é€šè¿‡ router.SetTrustedProxies([]string{\u0026#34;192.168.1.2\u0026#34;}) è®¾ç½®å—ä¿¡ä»»çš„ä»£ç† if engine.isUnsafeTrustedProxies() { debugPrint(\u0026#34;[WARNING] You trusted all proxies, this is NOT safe. We recommend you to set a value.\\n\u0026#34; + \u0026#34;Please check https://pkg.go.dev/github.com/gin-gonic/gin#readme-don-t-trust-all-proxies for details.\u0026#34;) } // è§£æç«¯å£åœ°å€ï¼Œé»˜è®¤ä½¿ç”¨ç¯å¢ƒå˜é‡PORTï¼Œæˆ–:8080 address := resolveAddress(addr) debugPrint(\u0026#34;Listening and serving HTTP on %s\\n\u0026#34;, address) // ç›‘å¬ç«¯å£åœ°å€ï¼Œengine.Handlerä½œä¸ºè¯·æ±‚å¤„ç†å‡½æ•° err = http.ListenAndServe(address, engine.Handler()) return } 4.æ€»ç»“ Engine æ˜¯ Gin æ¡†æ¶çš„æ ¸å¿ƒæ•°æ®ç»“æ„ï¼Œé€šè¿‡ Engine å¯¹è±¡å®šä¹‰æœåŠ¡è·¯ç”±ä¿¡æ¯åï¼Œä½¿ç”¨ http server å¯åŠ¨æœåŠ¡å¹¶ç›‘å¬ç«¯å£åœ°å€ã€‚\nEngine çš„æœ¬è´¨åªæ˜¯å¯¹å†…ç½®çš„ HTTP æœåŠ¡å™¨çš„åŒ…è£…ï¼Œè®©å®ƒä½¿ç”¨èµ·æ¥æ›´åŠ ä¾¿æ·ã€‚HTTP æœåŠ¡å™¨ä½¿ç”¨çš„æ˜¯ Go è¯­è¨€å†…ç½®çš„ http serverï¼Œ\n2ã€ç»“æ„ä½“ classDiagram Engine --|\u003e RouterGroup RouterGroup --o Engine RouterGroup --|\u003e IRouter IRouter --|\u003e IRoutes Engine --o methodTree methodTree --o node class Engine{ +[]methodTree methodTrees +addRoute() +Run() +ServeHTTP() } class RouterGroup{ +Handlers HandlersChain -engine *Engine +Use() +Group() } class IRouter{ \u003c\u003einterface +Group *RouterGroup } class IRoutes{ \u003c\u003einterface +Use() +Handle() +GET() +POST() } class methodTree{ -string method -*node root } class node{ +string path +bool wildChild +uint8 nType +[]node children }\r1. gin.Engine Engine æ˜¯ Gin æ¡†æ¶æœ€é‡è¦çš„æ•°æ®ç»“æ„ï¼Œå®ƒæ˜¯æ¡†æ¶çš„å…¥å£ã€‚æˆ‘ä»¬é€šè¿‡ Engine å¯¹è±¡æ¥å®šä¹‰æœåŠ¡è·¯ç”±ä¿¡æ¯ã€ç»„è£…æ’ä»¶ã€è¿è¡ŒæœåŠ¡ã€‚ æ­£å¦‚ Engine çš„ä¸­æ–‡æ„æ€ã€Œå¼•æ“ã€ä¸€æ ·ï¼Œå®ƒå°±æ˜¯æ¡†æ¶çš„æ ¸å¿ƒå‘åŠ¨æœºï¼Œæ•´ä¸ª Web æœåŠ¡çš„éƒ½æ˜¯ç”±å®ƒæ¥é©±åŠ¨çš„ã€‚\n// Engine is the framework\u0026#39;s instance, it contains the muxer, middleware and configuration settings. // Create an instance of Engine, by using New() or Default() type Engine struct { RouterGroup ... } 2. gin.RouterGroup RouterGroup æ˜¯ Engine çš„çˆ¶ç±»ï¼Œæ˜¯å¯¹è·¯ç”±æ ‘çš„åŒ…è£…ï¼Œæ‰€æœ‰çš„è·¯ç”±è§„åˆ™æœ€ç»ˆéƒ½æ˜¯ç”±å®ƒæ¥è¿›è¡Œç®¡ç†ã€‚\n// RouterGroup is used internally to configure router, a RouterGroup is associated with // a prefix and an array of handlers (middleware). type RouterGroup struct { Handlers HandlersChain basePath string engine *Engine root bool } RouterGroup å®ç°äº† IRoutes æ¥å£ï¼Œæš´éœ²äº†ä¸€ç³»åˆ—è·¯ç”±æ–¹æ³•ï¼Œè¿™äº›æ–¹æ³•æœ€ç»ˆéƒ½æ˜¯é€šè¿‡è°ƒç”¨ Engine.addRoute æ–¹æ³•å°†è¯·æ±‚å¤„ç†å™¨æŒ‚æ¥åˆ°è·¯ç”±æ ‘ä¸­ã€‚\n// IRoutes defines all router handle interface. type IRoutes interface { Use(...HandlerFunc) IRoutes Handle(string, string, ...HandlerFunc) IRoutes Any(string, ...HandlerFunc) IRoutes GET(string, ...HandlerFunc) IRoutes POST(string, ...HandlerFunc) IRoutes DELETE(string, ...HandlerFunc) IRoutes PATCH(string, ...HandlerFunc) IRoutes PUT(string, ...HandlerFunc) IRoutes OPTIONS(string, ...HandlerFunc) IRoutes HEAD(string, ...HandlerFunc) IRoutes StaticFile(string, string) IRoutes StaticFileFS(string, string, http.FileSystem) IRoutes Static(string, string) IRoutes StaticFS(string, http.FileSystem) IRoutes } 3. gin.node è·¯ç”±æ ‘ åœ¨ Gin æ¡†æ¶ä¸­ï¼Œè·¯ç”±è§„åˆ™è¢«åˆ†æˆäº†æœ€å¤š 9 æ£µå‰ç¼€æ ‘ï¼Œæ¯ä¸€ä¸ª HTTP Method å¯¹åº”ä¸€æ£µã€Œå‰ç¼€æ ‘ã€ï¼Œæ ‘çš„èŠ‚ç‚¹æŒ‰ç…§ URL ä¸­çš„ / ç¬¦å·è¿›è¡Œå±‚çº§åˆ’åˆ†ï¼Œ URL æ”¯æŒ :name å½¢å¼çš„åç§°åŒ¹é…ï¼Œ è¿˜æ”¯æŒ *subpath å½¢å¼çš„è·¯å¾„é€šé…ç¬¦ ã€‚\nGinçš„è·¯ç”±åªéœ€éå†ä¸€éå­—ç¬¦ä¸²å³å¯ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(n)ã€‚\nfunc New() *Engine { ... engine := \u0026amp;Engine{ ... trees: make(methodTrees, 0, 9), ... } } type node struct { path string // å½“å‰èŠ‚ç‚¹ç›¸å¯¹è·¯å¾„ï¼ˆä¸ç¥–å…ˆèŠ‚ç‚¹çš„ path æ‹¼æ¥å¯å¾—åˆ°å®Œæ•´è·¯å¾„ï¼‰ indices string // æ‰€ä»¥å­©å­èŠ‚ç‚¹çš„path[0]ç»„æˆçš„å­—ç¬¦ä¸² wildChild bool // å­©å­èŠ‚ç‚¹æ˜¯å¦æœ‰é€šé…ç¬¦ï¼ˆwildcardï¼‰ nType nodeType // èŠ‚ç‚¹ç±»å‹ priority uint32 // å½“å‰èŠ‚ç‚¹åŠå­å­™èŠ‚ç‚¹çš„å®é™…è·¯ç”±æ•°é‡ children []*node // å­©å­èŠ‚ç‚¹ handlers HandlersChain // å½“å‰èŠ‚ç‚¹çš„å¤„ç†å‡½æ•°ï¼ˆåŒ…æ‹¬ä¸­é—´ä»¶ï¼‰ fullPath string // å½“å‰èŠ‚ç‚¹å®Œæ•´è·¯å¾„ } 4. ç¤ºä¾‹ r.GET(\u0026#34;/\u0026#34;, func (context *gin.Context) {}) r.GET(\u0026#34;/index\u0026#34;, func (context *gin.Context) {}) r.GET(\u0026#34;/inter\u0026#34;, func (context *gin.Context) {}) r.GET(\u0026#34;/go\u0026#34;, func (context *gin.Context) {}) r.GET(\u0026#34;/game/:id/doc\u0026#34;, func (context *gin.Context) {}) flowchart TB / --\u003e in / --\u003e g in --\u003e dex in --\u003e ter g --\u003e o g --\u003e ame ame --\u003e :id :id --\u003e doc\r3ã€è·¯ç”±è¿‡ç¨‹ func (engine *Engine) handleHTTPRequest(c *Context) { ... // Find root of the tree for the given HTTP method t := engine.trees for i, tl := 0, len(t); i \u0026lt; tl; i++ { // è¿‡æ»¤method if t[i].method != httpMethod { continue } root := t[i].root // Find route in tree // åŒ¹é…æœ€ä½³è·¯ç”± value := root.getValue(rPath, c.params, c.skippedNodes, unescape) if value.params != nil { c.Params = *value.params } if value.handlers != nil { c.handlers = value.handlers c.fullPath = value.fullPath c.Next() c.writermem.WriteHeaderNow() return } if httpMethod != http.MethodConnect \u0026amp;\u0026amp; rPath != \u0026#34;/\u0026#34; { if value.tsr \u0026amp;\u0026amp; engine.RedirectTrailingSlash { redirectTrailingSlash(c) return } if engine.RedirectFixedPath \u0026amp;\u0026amp; redirectFixedPath(c, root, engine.RedirectFixedPath) { return } } break } ... } func (n *node) getValue(path string, params *Params, skippedNodes *[]skippedNode, unescape bool) (value nodeValue) { var globalParamsCount int16 walk: // Outer loop for walking the tree for { prefix := n.path // if len(path) \u0026gt; len(prefix) { if path[:len(prefix)] == prefix { path = path[len(prefix):] // Try all the non-wildcard children first by matching the indices idxc := path[0] for i, c := range []byte(n.indices) { if c == idxc { // strings.HasPrefix(n.children[len(n.children)-1].path, \u0026#34;:\u0026#34;) == n.wildChild if n.wildChild { index := len(*skippedNodes) *skippedNodes = (*skippedNodes)[:index+1] (*skippedNodes)[index] = skippedNode{ path: prefix + path, node: \u0026amp;node{ path: n.path, wildChild: n.wildChild, nType: n.nType, priority: n.priority, children: n.children, handlers: n.handlers, fullPath: n.fullPath, }, paramsCount: globalParamsCount, } } n = n.children[i] continue walk } } if !n.wildChild { // If the path at the end of the loop is not equal to \u0026#39;/\u0026#39; and the current node has no child nodes // the current node needs to roll back to last valid skippedNode if path != \u0026#34;/\u0026#34; { for l := len(*skippedNodes); l \u0026gt; 0; { skippedNode := (*skippedNodes)[l-1] *skippedNodes = (*skippedNodes)[:l-1] if strings.HasSuffix(skippedNode.path, path) { path = skippedNode.path n = skippedNode.node if value.params != nil { *value.params = (*value.params)[:skippedNode.paramsCount] } globalParamsCount = skippedNode.paramsCount continue walk } } } // Nothing found. // We can recommend to redirect to the same URL without a // trailing slash if a leaf exists for that path. value.tsr = path == \u0026#34;/\u0026#34; \u0026amp;\u0026amp; n.handlers != nil return } // Handle wildcard child, which is always at the end of the array n = n.children[len(n.children)-1] globalParamsCount++ switch n.nType { case param: // fix truncate the parameter // tree_test.go line: 204 // Find param end (either \u0026#39;/\u0026#39; or path end) end := 0 for end \u0026lt; len(path) \u0026amp;\u0026amp; path[end] != \u0026#39;/\u0026#39; { end++ } // Save param value if params != nil \u0026amp;\u0026amp; cap(*params) \u0026gt; 0 { if value.params == nil { value.params = params } // Expand slice within preallocated capacity i := len(*value.params) *value.params = (*value.params)[:i+1] val := path[:end] if unescape { if v, err := url.QueryUnescape(val); err == nil { val = v } } (*value.params)[i] = Param{ Key: n.path[1:], Value: val, } } // we need to go deeper! if end \u0026lt; len(path) { if len(n.children) \u0026gt; 0 { path = path[end:] n = n.children[0] continue walk } // ... but we can\u0026#39;t value.tsr = len(path) == end+1 return } if value.handlers = n.handlers; value.handlers != nil { value.fullPath = n.fullPath return } if len(n.children) == 1 { // No handle found. Check if a handle for this path + a // trailing slash exists for TSR recommendation n = n.children[0] value.tsr = (n.path == \u0026#34;/\u0026#34; \u0026amp;\u0026amp; n.handlers != nil) || (n.path == \u0026#34;\u0026#34; \u0026amp;\u0026amp; n.indices == \u0026#34;/\u0026#34;) } return case catchAll: // Save param value if params != nil { if value.params == nil { value.params = params } // Expand slice within preallocated capacity i := len(*value.params) *value.params = (*value.params)[:i+1] val := path if unescape { if v, err := url.QueryUnescape(path); err == nil { val = v } } (*value.params)[i] = Param{ Key: n.path[2:], Value: val, } } value.handlers = n.handlers value.fullPath = n.fullPath return default: panic(\u0026#34;invalid node type\u0026#34;) } } } if path == prefix { // If the current path does not equal \u0026#39;/\u0026#39; and the node does not have a registered handle and the most recently matched node has a child node // the current node needs to roll back to last valid skippedNode if n.handlers == nil \u0026amp;\u0026amp; path != \u0026#34;/\u0026#34; { for l := len(*skippedNodes); l \u0026gt; 0; { skippedNode := (*skippedNodes)[l-1] *skippedNodes = (*skippedNodes)[:l-1] if strings.HasSuffix(skippedNode.path, path) { path = skippedNode.path n = skippedNode.node if value.params != nil { *value.params = (*value.params)[:skippedNode.paramsCount] } globalParamsCount = skippedNode.paramsCount continue walk } } //\tn = latestNode.children[len(latestNode.children)-1] } // We should have reached the node containing the handle. // Check if this node has a handle registered. if value.handlers = n.handlers; value.handlers != nil { value.fullPath = n.fullPath return } // If there is no handle for this route, but this route has a // wildcard child, there must be a handle for this path with an // additional trailing slash if path == \u0026#34;/\u0026#34; \u0026amp;\u0026amp; n.wildChild \u0026amp;\u0026amp; n.nType != root { value.tsr = true return } // No handle found. Check if a handle for this path + a // trailing slash exists for trailing slash recommendation for i, c := range []byte(n.indices) { if c == \u0026#39;/\u0026#39; { n = n.children[i] value.tsr = (len(n.path) == 1 \u0026amp;\u0026amp; n.handlers != nil) || (n.nType == catchAll \u0026amp;\u0026amp; n.children[0].handlers != nil) return } } return } // Nothing found. We can recommend to redirect to the same URL with an // extra trailing slash if a leaf exists for that path value.tsr = path == \u0026#34;/\u0026#34; || (len(prefix) == len(path)+1 \u0026amp;\u0026amp; prefix[len(path)] == \u0026#39;/\u0026#39; \u0026amp;\u0026amp; path == prefix[:len(prefix)-1] \u0026amp;\u0026amp; n.handlers != nil) // roll back to last valid skippedNode if !value.tsr \u0026amp;\u0026amp; path != \u0026#34;/\u0026#34; { for l := len(*skippedNodes); l \u0026gt; 0; { skippedNode := (*skippedNodes)[l-1] *skippedNodes = (*skippedNodes)[:l-1] if strings.HasSuffix(skippedNode.path, path) { path = skippedNode.path n = skippedNode.node if value.params != nil { *value.params = (*value.params)[:skippedNode.paramsCount] } globalParamsCount = skippedNode.paramsCount continue walk } } } return } } ","permalink":"http://localhost:1313/posts/tech/gin/2-start-analyze/","summary":"1ã€æœåŠ¡å¯åŠ¨è¿‡ç¨‹ func main() { r := gin.Default() r.GET(\u0026#34;/ping\u0026#34;, func(c *gin.Context) { c.JSON(http.StatusOK, gin.H{ \u0026#34;message\u0026#34;: \u0026#34;pong\u0026#34;, }) }) r.Run() } 1. gin.Default() gin.Default() å‡½æ•°ä¼šç”Ÿæˆä¸€ä¸ªé»˜è®¤çš„ Engine å¯¹è±¡ï¼Œé‡Œé¢åŒ…å«äº† 2 ä¸ªé»˜è®¤çš„å¸¸ç”¨æ’ä»¶ï¼Œåˆ†åˆ«æ˜¯ Logger å’Œ Recover","title":"ginæ¡†æ¶(äºŒ)ã€æœåŠ¡å¯åŠ¨æºç è§£æ"},{"content":"","permalink":"http://localhost:1313/posts/life/one/","summary":"","title":"One"},{"content":"åˆ†å±‚æ¶æ„ Kubernetes è®¾è®¡ç†å¿µå’ŒåŠŸèƒ½å…¶å®å°±æ˜¯ä¸€ä¸ªç±»ä¼¼ Linux çš„åˆ†å±‚æ¶æ„\næ ¸å¿ƒå±‚ï¼šKubernetes æœ€æ ¸å¿ƒçš„åŠŸèƒ½ï¼Œå¯¹å¤–æä¾› API æ„å»ºé«˜å±‚çš„åº”ç”¨ï¼Œå¯¹å†…æä¾›æ’ä»¶å¼åº”ç”¨æ‰§è¡Œç¯å¢ƒ åº”ç”¨å±‚ï¼šéƒ¨ç½²ï¼ˆæ— çŠ¶æ€åº”ç”¨ã€æœ‰çŠ¶æ€åº”ç”¨ã€æ‰¹å¤„ç†ä»»åŠ¡ã€é›†ç¾¤åº”ç”¨ç­‰ï¼‰å’Œè·¯ç”±ï¼ˆæœåŠ¡å‘ç°ã€DNS è§£æç­‰ï¼‰ ç®¡ç†å±‚ï¼šç³»ç»Ÿåº¦é‡ï¼ˆå¦‚åŸºç¡€è®¾æ–½ã€å®¹å™¨å’Œç½‘ç»œçš„åº¦é‡ï¼‰ï¼Œè‡ªåŠ¨åŒ–ï¼ˆå¦‚è‡ªåŠ¨æ‰©å±•ã€åŠ¨æ€ Provision ç­‰ï¼‰ä»¥åŠç­–ç•¥ç®¡ç†ï¼ˆRBACã€Quotaã€PSPã€NetworkPolicy ç­‰ï¼‰ æ¥å£å±‚ï¼škubectl å‘½ä»¤è¡Œå·¥å…·ã€å®¢æˆ·ç«¯ SDK ä»¥åŠé›†ç¾¤è”é‚¦ ç”Ÿæ€ç³»ç»Ÿï¼šåœ¨æ¥å£å±‚ä¹‹ä¸Šçš„åºå¤§å®¹å™¨é›†ç¾¤ç®¡ç†è°ƒåº¦çš„ç”Ÿæ€ç³»ç»Ÿï¼Œå¯ä»¥åˆ’åˆ†ä¸ºä¸¤ä¸ªèŒƒç•´ Kubernetes å¤–éƒ¨ï¼šæ—¥å¿—ã€ç›‘æ§ã€é…ç½®ç®¡ç†ã€CIã€CDã€Workflowã€FaaSã€OTS åº”ç”¨ã€ChatOps ç­‰ Kubernetes å†…éƒ¨ï¼šCRIã€CNIã€CVIã€é•œåƒä»“åº“ã€Cloud Providerã€é›†ç¾¤è‡ªèº«çš„é…ç½®å’Œç®¡ç†ç­‰ API è®¾è®¡åŸåˆ™ å¯¹äºäº‘è®¡ç®—ç³»ç»Ÿï¼Œç³»ç»Ÿ API å®é™…ä¸Šå¤„äºç³»ç»Ÿè®¾è®¡çš„ç»Ÿé¢†åœ°ä½ï¼Œæ­£å¦‚æœ¬æ–‡å‰é¢æ‰€è¯´ï¼ŒKubernetes é›†ç¾¤ç³»ç»Ÿæ¯æ”¯æŒä¸€é¡¹æ–°åŠŸèƒ½ï¼Œå¼•å…¥ä¸€é¡¹æ–°æŠ€æœ¯ï¼Œ ä¸€å®šä¼šæ–°å¼•å…¥å¯¹åº”çš„ API å¯¹è±¡ï¼Œæ”¯æŒå¯¹è¯¥åŠŸèƒ½çš„ç®¡ç†æ“ä½œï¼Œç†è§£æŒæ¡çš„ APIï¼Œå°±å¥½æ¯”æŠ“ä½äº† Kubernetes ç³»ç»Ÿçš„ç‰›é¼»å­ã€‚Kubernetes ç³»ç»Ÿ API çš„è®¾è®¡æœ‰ä»¥ä¸‹å‡ æ¡åŸåˆ™\næ‰€æœ‰ API åº”è¯¥æ˜¯å£°æ˜å¼çš„ã€‚ æ­£å¦‚å‰æ–‡æ‰€è¯´ï¼Œå£°æ˜å¼çš„æ“ä½œï¼Œç›¸å¯¹äºå‘½ä»¤å¼æ“ä½œï¼Œå¯¹äºé‡å¤æ“ä½œçš„æ•ˆæœæ˜¯ç¨³å®šçš„ï¼Œè¿™å¯¹äºå®¹æ˜“å‡ºç°æ•°æ®ä¸¢å¤±æˆ–é‡å¤çš„åˆ†å¸ƒå¼ç¯å¢ƒæ¥è¯´æ˜¯å¾ˆé‡è¦çš„ã€‚ å¦å¤–ï¼Œå£°æ˜å¼æ“ä½œæ›´å®¹æ˜“è¢«ç”¨æˆ·ä½¿ç”¨ï¼Œå¯ä»¥ä½¿ç³»ç»Ÿå‘ç”¨æˆ·éšè—å®ç°çš„ç»†èŠ‚ï¼Œéšè—å®ç°çš„ç»†èŠ‚çš„åŒæ—¶ï¼Œä¹Ÿå°±ä¿ç•™äº†ç³»ç»Ÿæœªæ¥æŒç»­ä¼˜åŒ–çš„å¯èƒ½æ€§ã€‚æ­¤å¤–ï¼Œå£°æ˜å¼çš„ APIï¼ŒåŒæ—¶éšå«äº†æ‰€æœ‰çš„ API å¯¹è±¡éƒ½æ˜¯åè¯æ€§è´¨çš„ï¼Œä¾‹å¦‚ Serviceã€Volume è¿™äº› API éƒ½æ˜¯åè¯ï¼Œè¿™äº›åè¯æè¿°äº†ç”¨æˆ·æ‰€æœŸæœ›å¾—åˆ°çš„ä¸€ä¸ªç›®æ ‡åˆ†å¸ƒå¼å¯¹è±¡ã€‚\nAPI å¯¹è±¡æ˜¯å½¼æ­¤äº’è¡¥è€Œä¸”å¯ç»„åˆçš„ã€‚ è¿™é‡Œé¢å®é™…æ˜¯é¼“åŠ± API å¯¹è±¡å°½é‡å®ç°é¢å‘å¯¹è±¡è®¾è®¡æ—¶çš„è¦æ±‚ï¼Œå³ â€œé«˜å†…èšï¼Œæ¾è€¦åˆâ€ï¼Œå¯¹ä¸šåŠ¡ç›¸å…³çš„æ¦‚å¿µæœ‰ä¸€ä¸ªåˆé€‚çš„åˆ†è§£ï¼Œæé«˜åˆ†è§£å‡ºæ¥çš„å¯¹è±¡çš„å¯é‡ç”¨æ€§ã€‚ äº‹å®ä¸Šï¼ŒKubernetes è¿™ç§åˆ†å¸ƒå¼ç³»ç»Ÿç®¡ç†å¹³å°ï¼Œä¹Ÿæ˜¯ä¸€ç§ä¸šåŠ¡ç³»ç»Ÿï¼Œåªä¸è¿‡å®ƒçš„ä¸šåŠ¡å°±æ˜¯è°ƒåº¦å’Œç®¡ç†å®¹å™¨æœåŠ¡ã€‚\né«˜å±‚ API ä»¥æ“ä½œæ„å›¾ä¸ºåŸºç¡€è®¾è®¡ã€‚ å¦‚ä½•èƒ½å¤Ÿè®¾è®¡å¥½ APIï¼Œè·Ÿå¦‚ä½•èƒ½ç”¨é¢å‘å¯¹è±¡çš„æ–¹æ³•è®¾è®¡å¥½åº”ç”¨ç³»ç»Ÿæœ‰ç›¸é€šçš„åœ°æ–¹ï¼Œé«˜å±‚è®¾è®¡ä¸€å®šæ˜¯ä»ä¸šåŠ¡å‡ºå‘ï¼Œè€Œä¸æ˜¯è¿‡æ—©çš„ä»æŠ€æœ¯å®ç°å‡ºå‘ã€‚å› æ­¤ï¼Œé’ˆå¯¹ Kubernetes çš„é«˜å±‚ API è®¾è®¡ï¼Œä¸€å®šæ˜¯ä»¥ Kubernetes çš„ä¸šåŠ¡ä¸ºåŸºç¡€å‡ºå‘ï¼Œä¹Ÿå°±æ˜¯ä»¥ç³»ç»Ÿè°ƒåº¦ç®¡ç†å®¹å™¨çš„æ“ä½œæ„å›¾ä¸ºåŸºç¡€è®¾è®¡\nä½å±‚ API æ ¹æ®é«˜å±‚ API çš„æ§åˆ¶éœ€è¦è®¾è®¡ã€‚ è®¾è®¡å®ç°ä½å±‚ API çš„ç›®çš„ï¼Œæ˜¯ä¸ºäº†è¢«é«˜å±‚ API ä½¿ç”¨ï¼Œè€ƒè™‘å‡å°‘å†—ä½™ã€æé«˜é‡ç”¨æ€§çš„ç›®çš„ï¼Œä½å±‚ API çš„è®¾è®¡ä¹Ÿè¦ä»¥éœ€æ±‚ä¸ºåŸºç¡€ï¼Œè¦å°½é‡æŠµæŠ—å—æŠ€æœ¯å®ç°å½±å“çš„è¯±æƒ‘ã€‚\nå°½é‡é¿å…ç®€å•å°è£…ï¼Œä¸è¦æœ‰åœ¨å¤–éƒ¨ API æ— æ³•æ˜¾å¼çŸ¥é“çš„å†…éƒ¨éšè—çš„æœºåˆ¶ã€‚ ç®€å•çš„å°è£…ï¼Œå®é™…æ²¡æœ‰æä¾›æ–°çš„åŠŸèƒ½ï¼Œåè€Œå¢åŠ äº†å¯¹æ‰€å°è£… API çš„ä¾èµ–æ€§ã€‚å†…éƒ¨éšè—çš„æœºåˆ¶ä¹Ÿæ˜¯éå¸¸ä¸åˆ©äºç³»ç»Ÿç»´æŠ¤çš„è®¾è®¡æ–¹å¼ï¼Œä¾‹å¦‚ StatefulSet å’Œ ReplicaSetï¼Œæœ¬æ¥å°±æ˜¯ä¸¤ç§ Pod é›†åˆï¼Œé‚£ä¹ˆ Kubernetes å°±ç”¨ä¸åŒ API å¯¹è±¡æ¥å®šä¹‰å®ƒä»¬ï¼Œè€Œä¸ä¼šè¯´åªç”¨åŒä¸€ä¸ª ReplicaSetï¼Œå†…éƒ¨é€šè¿‡ç‰¹æ®Šçš„ç®—æ³•å†æ¥åŒºåˆ†è¿™ä¸ª ReplicaSet æ˜¯æœ‰çŠ¶æ€çš„è¿˜æ˜¯æ— çŠ¶æ€ã€‚\nAPI æ“ä½œå¤æ‚åº¦ä¸å¯¹è±¡æ•°é‡æˆæ­£æ¯”ã€‚ è¿™ä¸€æ¡ä¸»è¦æ˜¯ä»ç³»ç»Ÿæ€§èƒ½è§’åº¦è€ƒè™‘ï¼Œè¦ä¿è¯æ•´ä¸ªç³»ç»Ÿéšç€ç³»ç»Ÿè§„æ¨¡çš„æ‰©å¤§ï¼Œæ€§èƒ½ä¸ä¼šè¿…é€Ÿå˜æ…¢åˆ°æ— æ³•ä½¿ç”¨ï¼Œé‚£ä¹ˆæœ€ä½çš„é™å®šå°±æ˜¯ API çš„æ“ä½œå¤æ‚åº¦ä¸èƒ½è¶…è¿‡ O(N)ï¼ŒN æ˜¯å¯¹è±¡çš„æ•°é‡ï¼Œå¦åˆ™ç³»ç»Ÿå°±ä¸å…·å¤‡æ°´å¹³ä¼¸ç¼©æ€§äº†ã€‚\nAPI å¯¹è±¡çŠ¶æ€ä¸èƒ½ä¾èµ–äºç½‘ç»œè¿æ¥çŠ¶æ€ã€‚ ç”±äºä¼—æ‰€å‘¨çŸ¥ï¼Œåœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸‹ï¼Œç½‘ç»œè¿æ¥æ–­å¼€æ˜¯ç»å¸¸å‘ç”Ÿçš„äº‹æƒ…ï¼Œå› æ­¤è¦ä¿è¯ API å¯¹è±¡çŠ¶æ€èƒ½åº”å¯¹ç½‘ç»œçš„ä¸ç¨³å®šï¼ŒAPI å¯¹è±¡çš„çŠ¶æ€å°±ä¸èƒ½ä¾èµ–äºç½‘ç»œè¿æ¥çŠ¶æ€ã€‚ å°½é‡é¿å…è®©æ“ä½œæœºåˆ¶ä¾èµ–äºå…¨å±€çŠ¶æ€ï¼Œå› ä¸ºåœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­è¦ä¿è¯å…¨å±€çŠ¶æ€çš„åŒæ­¥æ˜¯éå¸¸å›°éš¾çš„ã€‚\næ§åˆ¶æœºåˆ¶è®¾è®¡åŸåˆ™ æ§åˆ¶é€»è¾‘åº”è¯¥åªä¾èµ–äºå½“å‰çŠ¶æ€ã€‚ è¿™æ˜¯ä¸ºäº†ä¿è¯åˆ†å¸ƒå¼ç³»ç»Ÿçš„ç¨³å®šå¯é ï¼Œå¯¹äºç»å¸¸å‡ºç°å±€éƒ¨é”™è¯¯çš„åˆ†å¸ƒå¼ç³»ç»Ÿï¼Œå¦‚æœæ§åˆ¶é€»è¾‘åªä¾èµ–å½“å‰çŠ¶æ€ï¼Œé‚£ä¹ˆå°±éå¸¸å®¹æ˜“å°†ä¸€ä¸ªæš‚æ—¶å‡ºç°æ•…éšœçš„ç³»ç»Ÿæ¢å¤åˆ°æ­£å¸¸çŠ¶æ€ï¼Œ å› ä¸ºä½ åªè¦å°†è¯¥ç³»ç»Ÿé‡ç½®åˆ°æŸä¸ªç¨³å®šçŠ¶æ€ï¼Œå°±å¯ä»¥è‡ªä¿¡çš„çŸ¥é“ç³»ç»Ÿçš„æ‰€æœ‰æ§åˆ¶é€»è¾‘ä¼šå¼€å§‹æŒ‰ç…§æ­£å¸¸æ–¹å¼è¿è¡Œã€‚\nå‡è®¾ä»»ä½•é”™è¯¯çš„å¯èƒ½ï¼Œå¹¶åšå®¹é”™å¤„ç†ã€‚ åœ¨ä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿä¸­å‡ºç°å±€éƒ¨å’Œä¸´æ—¶é”™è¯¯æ˜¯å¤§æ¦‚ç‡äº‹ä»¶ã€‚é”™è¯¯å¯èƒ½æ¥è‡ªäºç‰©ç†ç³»ç»Ÿæ•…éšœï¼Œå¤–éƒ¨ç³»ç»Ÿæ•…éšœä¹Ÿå¯èƒ½æ¥è‡ªäºç³»ç»Ÿè‡ªèº«çš„ä»£ç é”™è¯¯ï¼Œ ä¾é è‡ªå·±å®ç°çš„ä»£ç ä¸ä¼šå‡ºé”™æ¥ä¿è¯ç³»ç»Ÿç¨³å®šå…¶å®ä¹Ÿæ˜¯éš¾ä»¥å®ç°çš„ï¼Œå› æ­¤è¦è®¾è®¡å¯¹ä»»ä½•å¯èƒ½é”™è¯¯çš„å®¹é”™å¤„ç†ã€‚\nå°½é‡é¿å…å¤æ‚çŠ¶æ€æœºï¼Œæ§åˆ¶é€»è¾‘ä¸è¦ä¾èµ–æ— æ³•ç›‘æ§çš„å†…éƒ¨çŠ¶æ€ã€‚ å› ä¸ºåˆ†å¸ƒå¼ç³»ç»Ÿå„ä¸ªå­ç³»ç»Ÿéƒ½æ˜¯ä¸èƒ½ä¸¥æ ¼é€šè¿‡ç¨‹åºå†…éƒ¨ä¿æŒåŒæ­¥çš„ï¼Œæ‰€ä»¥å¦‚æœä¸¤ä¸ªå­ç³»ç»Ÿçš„æ§åˆ¶é€»è¾‘å¦‚æœäº’ç›¸æœ‰å½±å“ï¼Œé‚£ä¹ˆå­ç³»ç»Ÿå°±ä¸€å®šè¦èƒ½äº’ç›¸è®¿é—®åˆ°å½±å“æ§åˆ¶é€»è¾‘çš„çŠ¶æ€ï¼Œ å¦åˆ™ï¼Œå°±ç­‰åŒäºç³»ç»Ÿé‡Œå­˜åœ¨ä¸ç¡®å®šçš„æ§åˆ¶é€»è¾‘ã€‚\nå‡è®¾ä»»ä½•æ“ä½œéƒ½å¯èƒ½è¢«ä»»ä½•æ“ä½œå¯¹è±¡æ‹’ç»ï¼Œç”šè‡³è¢«é”™è¯¯è§£æã€‚ ç”±äºåˆ†å¸ƒå¼ç³»ç»Ÿçš„å¤æ‚æ€§ä»¥åŠå„å­ç³»ç»Ÿçš„ç›¸å¯¹ç‹¬ç«‹æ€§ï¼Œä¸åŒå­ç³»ç»Ÿç»å¸¸æ¥è‡ªä¸åŒçš„å¼€å‘å›¢é˜Ÿï¼Œæ‰€ä»¥ä¸èƒ½å¥¢æœ›ä»»ä½•æ“ä½œè¢«å¦ä¸€ä¸ªå­ç³»ç»Ÿä»¥æ­£ç¡®çš„æ–¹å¼å¤„ç†ï¼Œ è¦ä¿è¯å‡ºç°é”™è¯¯çš„æ—¶å€™ï¼Œæ“ä½œçº§åˆ«çš„é”™è¯¯ä¸ä¼šå½±å“åˆ°ç³»ç»Ÿç¨³å®šæ€§ã€‚\næ¯ä¸ªæ¨¡å—éƒ½å¯ä»¥åœ¨å‡ºé”™åè‡ªåŠ¨æ¢å¤ã€‚ ç”±äºåˆ†å¸ƒå¼ç³»ç»Ÿä¸­æ— æ³•ä¿è¯ç³»ç»Ÿå„ä¸ªæ¨¡å—æ˜¯å§‹ç»ˆè¿æ¥çš„ï¼Œå› æ­¤æ¯ä¸ªæ¨¡å—è¦æœ‰è‡ªæˆ‘ä¿®å¤çš„èƒ½åŠ›ï¼Œä¿è¯ä¸ä¼šå› ä¸ºè¿æ¥ä¸åˆ°å…¶ä»–æ¨¡å—è€Œè‡ªæˆ‘å´©æºƒã€‚\næ¯ä¸ªæ¨¡å—éƒ½å¯ä»¥åœ¨å¿…è¦æ—¶ä¼˜é›…åœ°é™çº§æœåŠ¡ã€‚ æ‰€è°“ä¼˜é›…åœ°é™çº§æœåŠ¡ï¼Œæ˜¯å¯¹ç³»ç»Ÿé²æ£’æ€§çš„è¦æ±‚ï¼Œå³è¦æ±‚åœ¨è®¾è®¡å®ç°æ¨¡å—æ—¶åˆ’åˆ†æ¸…æ¥šåŸºæœ¬åŠŸèƒ½å’Œé«˜çº§åŠŸèƒ½ï¼Œä¿è¯åŸºæœ¬åŠŸèƒ½ä¸ä¼šä¾èµ–é«˜çº§åŠŸèƒ½ï¼Œ è¿™æ ·åŒæ—¶å°±ä¿è¯äº†ä¸ä¼šå› ä¸ºé«˜çº§åŠŸèƒ½å‡ºç°æ•…éšœè€Œå¯¼è‡´æ•´ä¸ªæ¨¡å—å´©æºƒã€‚æ ¹æ®è¿™ç§ç†å¿µå®ç°çš„ç³»ç»Ÿï¼Œä¹Ÿæ›´å®¹æ˜“å¿«é€Ÿåœ°å¢åŠ æ–°çš„é«˜çº§åŠŸèƒ½ï¼Œå› ä¸ºä¸å¿…æ‹…å¿ƒå¼•å…¥é«˜çº§åŠŸèƒ½å½±å“åŸæœ‰çš„åŸºæœ¬åŠŸèƒ½ã€‚\nEtcd è§£æ Etcd æ˜¯ Kubernetes é›†ç¾¤ä¸­çš„ä¸€ä¸ªååˆ†é‡è¦çš„ç»„ä»¶ï¼Œç”¨fäºä¿å­˜é›†ç¾¤æ‰€æœ‰çš„ç½‘ç»œé…ç½®å’Œå¯¹è±¡çš„çŠ¶æ€ä¿¡æ¯ã€‚ æ•´ä¸ª Kubernetes ç³»ç»Ÿä¸­ä¸€å…±æœ‰ä¸¤ä¸ªæœåŠ¡éœ€è¦ç”¨åˆ° etcd ç”¨æ¥ååŒå’Œå­˜å‚¨é…ç½®ï¼Œåˆ†åˆ«æ˜¯ï¼š\nç½‘ç»œæ’ä»¶ flannelã€å¯¹äºå…¶å®ƒç½‘ç»œæ’ä»¶ä¹Ÿéœ€è¦ç”¨åˆ° etcd å­˜å‚¨ç½‘ç»œçš„é…ç½®ä¿¡æ¯ Kubernetes æœ¬èº«ï¼ŒåŒ…æ‹¬å„ç§å¯¹è±¡çš„çŠ¶æ€å’Œå…ƒä¿¡æ¯é…ç½®\n","permalink":"http://localhost:1313/posts/tech/k8s/architecture/","summary":"åˆ†å±‚æ¶æ„ Kubernetes è®¾è®¡ç†å¿µå’ŒåŠŸèƒ½å…¶å®å°±æ˜¯ä¸€ä¸ªç±»ä¼¼ Linux çš„åˆ†å±‚æ¶æ„ æ ¸å¿ƒå±‚ï¼šKubernetes æœ€æ ¸å¿ƒçš„åŠŸèƒ½ï¼Œå¯¹å¤–æä¾› API æ„å»ºé«˜å±‚çš„åº”ç”¨ï¼Œå¯¹å†…æä¾›æ’ä»¶å¼åº”ç”¨æ‰§","title":"Kubernetesæ¶æ„"},{"content":" äº‘åŸç”ŸæŠ€æœ¯æœ‰åˆ©äºå„ç»„ç»‡åœ¨å…¬æœ‰äº‘ã€ç§æœ‰äº‘å’Œæ··åˆäº‘ç­‰æ–°å‹åŠ¨æ€ç¯å¢ƒä¸­ï¼Œæ„å»ºå’Œè¿è¡Œå¯å¼¹æ€§æ‰©å±•çš„åº”ç”¨ã€‚ äº‘åŸç”Ÿçš„ä»£è¡¨æŠ€æœ¯åŒ…æ‹¬ å®¹å™¨ã€æœåŠ¡ç½‘æ ¼ã€å¾®æœåŠ¡ã€ä¸å¯å˜åŸºç¡€è®¾æ–½ å’Œ å£°æ˜å¼ APIã€‚ è¿™äº›æŠ€æœ¯èƒ½å¤Ÿæ„å»ºå®¹é”™æ€§å¥½ã€æ˜“äºç®¡ç†å’Œä¾¿äºè§‚å¯Ÿçš„æ¾è€¦åˆç³»ç»Ÿã€‚ç»“åˆå¯é çš„è‡ªåŠ¨åŒ–æ‰‹æ®µï¼Œäº‘åŸç”ŸæŠ€æœ¯ä½¿å·¥ç¨‹å¸ˆèƒ½å¤Ÿè½»æ¾åœ°å¯¹ç³»ç»Ÿä½œå‡ºé¢‘ç¹å’Œå¯é¢„æµ‹çš„é‡å¤§å˜æ›´ã€‚â€”â€”CNCFï¼ˆäº‘åŸç”Ÿè®¡ç®—åŸºé‡‘ä¼šï¼‰ã€‚\näº‘åŸç”Ÿçš„è®¾è®¡ç†å¿µ é¢å‘åˆ†å¸ƒå¼è®¾è®¡ï¼ˆDistributionï¼‰ï¼šå®¹å™¨ã€å¾®æœåŠ¡ã€API é©±åŠ¨çš„å¼€å‘ï¼› é¢å‘é…ç½®è®¾è®¡ï¼ˆConfigurationï¼‰ï¼šä¸€ä¸ªé•œåƒï¼Œå¤šä¸ªç¯å¢ƒé…ç½®ï¼› é¢å‘éŸ§æ€§è®¾è®¡ï¼ˆResistancyï¼‰ï¼šæ•…éšœå®¹å¿å’Œè‡ªæ„ˆï¼› é¢å‘å¼¹æ€§è®¾è®¡ï¼ˆElasticityï¼‰ï¼šå¼¹æ€§æ‰©å±•å’Œå¯¹ç¯å¢ƒå˜åŒ–ï¼ˆè´Ÿè½½ï¼‰åšå‡ºå“åº”ï¼› é¢å‘äº¤ä»˜è®¾è®¡ï¼ˆDeliveryï¼‰ï¼šè‡ªåŠ¨æ‹‰èµ·ï¼Œç¼©çŸ­äº¤ä»˜æ—¶é—´ï¼› é¢å‘æ€§èƒ½è®¾è®¡ï¼ˆPerformanceï¼‰ï¼šå“åº”å¼ï¼Œå¹¶å‘å’Œèµ„æºé«˜æ•ˆåˆ©ç”¨ï¼› é¢å‘è‡ªåŠ¨åŒ–è®¾è®¡ï¼ˆAutomationï¼‰ï¼šè‡ªåŠ¨åŒ–çš„ DevOpsï¼› é¢å‘è¯Šæ–­æ€§è®¾è®¡ï¼ˆDiagnosabilityï¼‰ï¼šé›†ç¾¤çº§åˆ«çš„æ—¥å¿—ã€metric å’Œè¿½è¸ªï¼› é¢å‘å®‰å…¨æ€§è®¾è®¡ï¼ˆSecurityï¼‰ï¼šå®‰å…¨ç«¯ç‚¹ã€API Gatewayã€ç«¯åˆ°ç«¯åŠ å¯†ï¼› äº‘è®¡ç®—ä»‹ç» äº‘åŸç”Ÿå€Ÿäº†äº‘è®¡ç®—çš„ä¸œé£ï¼Œæ²¡æœ‰äº‘è®¡ç®—ï¼Œè‡ªç„¶æ²¡æœ‰äº‘åŸç”Ÿï¼Œäº‘è®¡ç®—æ˜¯äº‘åŸç”Ÿçš„åŸºç¡€ã€‚\né€šä¿—çš„è®²ï¼Œäº‘è®¡ç®—å¯ä»¥è¯´æ˜¯ä¸€ç§é…ç½®èµ„æºçš„æ–¹å¼ï¼Œéšç€è™šæ‹ŸåŒ–æŠ€æœ¯ï¼Œå¯æŒç»­äº¤ä»˜ï¼Œç¼–æ’ç³»ç»Ÿçš„å¿«é€Ÿå‘å±•åŠæ™®åŠï¼Œåº”ç”¨ä¸Šäº‘å·²ç»æ˜¯ä¸å¯é€†è½¬çš„è¶‹åŠ¿ã€‚ äº‘è®¡ç®—ä»å®è§‚ä¸ŠæŒ‰3å±‚åˆ’åˆ†ï¼Œå³åŸºç¡€è®¾æ–½å³æœåŠ¡(IaaS)ã€å¹³å°å³æœåŠ¡(PaaS)ã€è½¯ä»¶å³æœåŠ¡(SaaS)ä¸ºäº‘åŸç”Ÿæä¾›äº†æŠ€æœ¯åŸºç¡€å’Œæ–¹å‘æŒ‡å¼•ï¼Œ\nIaaSï¼šè¿™æ˜¯ä¸ºäº†æƒ³è¦å»ºç«‹è‡ªå·±çš„å•†ä¸šæ¨¡å¼å¹¶è¿›è¡Œè‡ªå®šä¹‰çš„å®¢æˆ·ï¼Œä¾‹å¦‚äºšé©¬é€Šçš„ EC2ã€S3 å­˜å‚¨ã€Rackspace è™šæ‹Ÿæœºç­‰éƒ½æ˜¯ IaaSã€‚ PaaSï¼šå·¥å…·å’ŒæœåŠ¡çš„é›†åˆï¼Œå¯¹äºæƒ³ç”¨å®ƒæ¥æ„å»ºè‡ªå·±çš„åº”ç”¨ç¨‹åºæˆ–è€…æƒ³å¿«é€Ÿå¾—å°†åº”ç”¨ç¨‹åºéƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒè€Œä¸å¿…å…³å¿ƒåº•å±‚ç¡¬ä»¶çš„ç”¨æˆ·å’Œå¼€å‘è€…æ¥è¯´æ˜¯ç‰¹åˆ«æœ‰ç”¨çš„ï¼Œ æ¯”å¦‚ Cloud Foundryã€Google App Engineã€Heroku ç­‰ã€‚ SaaSï¼šç»ˆç«¯ç”¨æˆ·å¯ä»¥ç›´æ¥ä½¿ç”¨çš„åº”ç”¨ç¨‹åºã€‚è¿™ä¸ªå°±å¤ªå¤šï¼Œæˆ‘ä»¬ç”Ÿæ´»ä¸­ç”¨åˆ°çš„å¾ˆå¤šè½¯ä»¶éƒ½æ˜¯ SaaS æœåŠ¡ï¼Œåªè¦åŸºäºäº’è”ç½‘æ¥æä¾›çš„æœåŠ¡åŸºæœ¬éƒ½æ˜¯ SaaS æœåŠ¡ï¼Œæœ‰çš„æœåŠ¡æ˜¯å…è´¹çš„ï¼Œæ¯”å¦‚ Google Docsï¼Œè¿˜æœ‰æ›´å¤šçš„æ˜¯æ ¹æ®æˆ‘ä»¬è´­ä¹°çš„ Plan å’Œä½¿ç”¨é‡ä»˜è´¹ï¼Œæ¯”å¦‚ GitHubã€å„ç§äº‘å­˜å‚¨ã€‚ çœŸæ­£çš„äº‘åŒ–ä¸ä»…ä»…æ˜¯åŸºç¡€è®¾æ–½å’Œå¹³å°çš„å˜åŒ–ï¼Œåº”ç”¨ä¹Ÿéœ€è¦åšå‡ºæ”¹å˜ï¼Œæ‘ˆå¼ƒä¼ ç»Ÿçš„åœŸæ–¹æ³•ï¼Œåœ¨æ¶æ„è®¾è®¡ã€å¼€å‘æ–¹å¼ã€éƒ¨ç½²ç»´æŠ¤ç­‰å„ä¸ªé˜¶æ®µå’Œæ–¹é¢éƒ½åŸºäºäº‘çš„ç‰¹ç‚¹ï¼Œé‡æ–°è®¾è®¡ï¼Œä»è€Œå»ºè®¾å…¨æ–°çš„äº‘åŒ–çš„åº”ç”¨ï¼Œå³äº‘åŸç”Ÿåº”ç”¨ã€‚\nKubernetesä½œä¸ºä¸€ä¸ªåˆ†å¸ƒå¼é›†ç¾¤ç®¡ç†ç³»ç»Ÿï¼Œå®ƒçš„ä¸€ä¸ªé‡è¦ç›®æ ‡æ˜¯ï¼šå°†é€‚åˆçš„èµ„æºåˆ†é…ç»™é€‚åˆçš„åº”ç”¨ï¼Œæ»¡è¶³å¯¹åº”ç”¨çš„QoSè¦æ±‚å’Œè·å¾—æœ€ä¼˜çš„èµ„æºä½¿ç”¨æ•ˆç‡ã€‚\n","permalink":"http://localhost:1313/posts/tech/cloud_native/design/","summary":"äº‘åŸç”ŸæŠ€æœ¯æœ‰åˆ©äºå„ç»„ç»‡åœ¨å…¬æœ‰äº‘ã€ç§æœ‰äº‘å’Œæ··åˆäº‘ç­‰æ–°å‹åŠ¨æ€ç¯å¢ƒä¸­ï¼Œæ„å»ºå’Œè¿è¡Œå¯å¼¹æ€§æ‰©å±•çš„åº”ç”¨ã€‚ äº‘åŸç”Ÿçš„ä»£è¡¨æŠ€æœ¯åŒ…æ‹¬ å®¹å™¨ã€æœåŠ¡ç½‘æ ¼ã€å¾®æœåŠ¡ã€ä¸å¯","title":"å¦‚ä½•äº‘åŸç”Ÿ"},{"content":"äº‘åŸç”Ÿæ¦‚å¿µ ä»€ä¹ˆæ˜¯äº‘åŸç”Ÿï¼ˆCloud Nativeï¼‰ï¼Ÿä¼´éšç€äº‘è®¡ç®—çš„é«˜é€Ÿå‘å±•ï¼Œäº‘åŸç”Ÿçš„æ¦‚å¿µä¹Ÿæ˜¯ä¸€ç›´å¤„äºå‘å±•å˜åŒ–ä¹‹ä¸­ï¼Œåˆ°ç›®å‰ä¸ºæ­¢ï¼Œå¹¶æ²¡æœ‰ä¸€ä¸ªç¡®åˆ‡çš„å®šä¹‰ã€‚\næˆ‘ä»¬ç°åœ¨è°ˆåˆ°äº‘åŸç”Ÿï¼Œæ›´å¤šçš„æŒ‡çš„æ˜¯ä¸€ç§æ–‡åŒ–ï¼Œè€Œä¸å…·è±¡ä¸ºå“ªäº›æŠ€æœ¯ä½“ç³»ï¼Œ** å‡¡æ˜¯èƒ½å¤Ÿæé«˜äº‘ä¸Šèµ„æºåˆ©ç”¨ç‡å’Œåº”ç”¨äº¤ä»˜æ•ˆç‡çš„è¡Œä¸ºæˆ–æ–¹å¼éƒ½æ˜¯äº‘åŸç”Ÿçš„**ã€‚\näº‘è®¡ç®—çš„å‘å±•å²å°±æ˜¯ä¸€éƒ¨äº‘åŸç”ŸåŒ–çš„å†å²ï¼Œ\nKubernetes å¼€å¯äº†äº‘åŸç”Ÿçš„åºå¹•ï¼Œ\næœåŠ¡ç½‘æ ¼ Istio çš„å‡ºç°ï¼Œå¼•é¢†äº†å Kubernetes æ—¶ä»£çš„å¾®æœåŠ¡ï¼Œ\nServerless çš„å…´èµ·ï¼Œä½¿å¾—äº‘åŸç”Ÿä»åŸºç¡€è®¾æ–½å±‚ä¸æ–­å‘åº”ç”¨æ¶æ„å±‚æŒºè¿›ï¼Œ\næˆ‘ä»¬æ­£å¤„äºä¸€ä¸ªäº‘åŸç”Ÿçš„æ–°æ—¶ä»£ã€‚\nPivotal å®šä¹‰ Pivotalå…¬å¸çš„Matt Stineäº2013å¹´é¦–æ¬¡æå‡ºäº‘åŸç”Ÿï¼ˆCloudNativeï¼‰çš„æ¦‚å¿µã€‚2015å¹´ï¼Œäº‘åŸç”Ÿåˆšæ¨å¹¿æ—¶ï¼ŒMatt Stineåœ¨ã€Šè¿ç§»åˆ°äº‘åŸç”Ÿæ¶æ„ã€‹ä¸€ä¹¦ä¸­å®šä¹‰äº†ç¬¦åˆäº‘åŸç”Ÿæ¶æ„çš„å‡ ä¸ªç‰¹å¾ï¼š\nç¬¦åˆ 12 å› ç´ åº”ç”¨ é¢å‘å¾®æœåŠ¡æ¶æ„ è‡ªæœåŠ¡æ•æ·æ¶æ„ åŸºäº API çš„åä½œ æŠ—è„†å¼±æ€§ åˆ°äº† 2017 å¹´ï¼ŒMatt Stine åœ¨æ¥å— InfoQ é‡‡è®¿æ—¶åˆæ”¹äº†å£é£ï¼Œå°†äº‘åŸç”Ÿæ¶æ„å½’çº³ä¸º6ä¸ªç‰¹è´¨\næ¨¡å—åŒ– å¯è§‚å¯Ÿ å¯éƒ¨ç½² å¯æµ‹è¯• å¯æ›¿æ¢ å¯å¤„ç† è€ŒPivotalæœ€æ–°å®˜ç½‘å¯¹äº‘åŸç”Ÿæ¦‚æ‹¬ä¸º4ä¸ªè¦ç‚¹ï¼š\nDevOps æŒç»­äº¤ä»˜ å¾®æœåŠ¡ å®¹å™¨ CNCF å®šä¹‰ 2015 å¹´ Google ä¸»å¯¼æˆç«‹äº†äº‘åŸç”Ÿè®¡ç®—åŸºé‡‘ä¼šï¼ˆCNCFï¼‰ï¼Œèµ·åˆ CNCF å¯¹äº‘åŸç”Ÿï¼ˆCloud Nativeï¼‰çš„å®šä¹‰åŒ…å«ä»¥ä¸‹ä¸‰ä¸ªæ–¹é¢ï¼š\nåº”ç”¨å®¹å™¨åŒ– é¢å‘å¾®æœåŠ¡æ¶æ„ åº”ç”¨æ”¯æŒå®¹å™¨çš„ç¼–æ’è°ƒåº¦ï¼ˆè‡ªåŠ¨åŒ–ç®¡ç†ï¼‰ åˆ°äº† 2018 å¹´ï¼Œéšç€è¿‘å‡ å¹´æ¥äº‘åŸç”Ÿç”Ÿæ€çš„ä¸æ–­å£®å¤§ï¼Œæ‰€æœ‰ä¸»æµäº‘è®¡ç®—ä¾›åº”å•†éƒ½åŠ å…¥äº†è¯¥åŸºé‡‘ä¼šï¼Œä¸”ä» Cloud Native Landscape ä¸­ å¯ä»¥çœ‹å‡ºäº‘åŸç”Ÿæœ‰æ„èš•é£ŸåŸå…ˆéäº‘åŸç”Ÿåº”ç”¨çš„éƒ¨åˆ†ã€‚CNCF åŸºé‡‘ä¼šä¸­çš„ä¼šå‘˜ä»¥åŠå®¹çº³çš„é¡¹ç›®è¶Šæ¥è¶Šå¤šï¼Œè¯¥å®šä¹‰å·²ç»é™åˆ¶äº†äº‘åŸç”Ÿç”Ÿæ€çš„å‘å±•ï¼ŒCNCF ä¸ºäº‘åŸç”Ÿè¿›è¡Œäº†é‡æ–°å®šä½ã€‚\nå°† æœåŠ¡ç½‘æ ¼(Service Mesh) å’Œ å£°æ˜å¼API ç»™åŠ äº†è¿›æ¥ã€‚\näº‘åŸç”ŸæŠ€æœ¯æœ‰åˆ©äºå„ç»„ç»‡åœ¨å…¬æœ‰äº‘ã€ç§æœ‰äº‘å’Œæ··åˆäº‘ç­‰æ–°å‹åŠ¨æ€ç¯å¢ƒä¸­ï¼Œæ„å»ºå’Œè¿è¡Œå¯å¼¹æ€§æ‰©å±•çš„åº”ç”¨ã€‚äº‘åŸç”Ÿçš„ä»£è¡¨æŠ€æœ¯åŒ…æ‹¬å®¹å™¨ã€æœåŠ¡ç½‘æ ¼ã€å¾®æœåŠ¡ã€ä¸å¯å˜åŸºç¡€è®¾æ–½å’Œå£°æ˜å¼ APIã€‚\nè¿™äº›æŠ€æœ¯èƒ½å¤Ÿæ„å»ºå®¹é”™æ€§å¥½ã€æ˜“äºç®¡ç†å’Œä¾¿äºè§‚å¯Ÿçš„æ¾è€¦åˆç³»ç»Ÿã€‚ç»“åˆå¯é çš„è‡ªåŠ¨åŒ–æ‰‹æ®µï¼Œäº‘åŸç”ŸæŠ€æœ¯ä½¿å·¥ç¨‹å¸ˆèƒ½å¤Ÿè½»æ¾åœ°å¯¹ç³»ç»Ÿä½œå‡ºé¢‘ç¹å’Œå¯é¢„æµ‹çš„é‡å¤§å˜æ›´ã€‚\näº‘åŸç”Ÿè®¡ç®—åŸºé‡‘ä¼šï¼ˆCNCFï¼‰è‡´åŠ›äºåŸ¹è‚²å’Œç»´æŠ¤ä¸€ä¸ªå‚å•†ä¸­ç«‹çš„å¼€æºç”Ÿæ€ç³»ç»Ÿï¼Œæ¥æ¨å¹¿äº‘åŸç”ŸæŠ€æœ¯ã€‚æˆ‘ä»¬é€šè¿‡å°†æœ€å‰æ²¿çš„æ¨¡å¼æ°‘ä¸»åŒ–ï¼Œè®©è¿™äº›åˆ›æ–°ä¸ºå¤§ä¼—æ‰€ç”¨ã€‚\næ€»ç»“ å‡¡æ˜¯èƒ½å¤Ÿæé«˜äº‘ä¸Šèµ„æºåˆ©ç”¨ç‡å’Œåº”ç”¨äº¤ä»˜æ•ˆç‡çš„è¡Œä¸ºæˆ–æ–¹å¼éƒ½æ˜¯äº‘åŸç”Ÿçš„ã€‚\né‡‡ç”¨å¼€æºå †æ ˆï¼ˆK8S+Dockerï¼‰è¿›è¡Œå®¹å™¨åŒ–ï¼Œ åŸºäºå¾®æœåŠ¡æ¶æ„æé«˜çµæ´»æ€§å’Œå¯ç»´æŠ¤æ€§ï¼Œ å€ŸåŠ©æ•æ·æ–¹æ³•ã€DevOpsæ”¯æŒæŒç»­è¿­ä»£å’Œè¿ç»´è‡ªåŠ¨åŒ–ï¼Œ åˆ©ç”¨äº‘å¹³å°è®¾æ–½å®ç°å¼¹æ€§ä¼¸ç¼©ã€åŠ¨æ€è°ƒåº¦ã€ä¼˜åŒ–èµ„æºåˆ©ç”¨ç‡ã€‚\nå‚è€ƒ äº‘åŸç”Ÿçš„å®šä¹‰\nä»€ä¹ˆæ˜¯äº‘åŸç”Ÿ\n","permalink":"http://localhost:1313/posts/tech/cloud_native/definition/","summary":"äº‘åŸç”Ÿæ¦‚å¿µ ä»€ä¹ˆæ˜¯äº‘åŸç”Ÿï¼ˆCloud Nativeï¼‰ï¼Ÿä¼´éšç€äº‘è®¡ç®—çš„é«˜é€Ÿå‘å±•ï¼Œäº‘åŸç”Ÿçš„æ¦‚å¿µä¹Ÿæ˜¯ä¸€ç›´å¤„äºå‘å±•å˜åŒ–ä¹‹ä¸­ï¼Œåˆ°ç›®å‰ä¸ºæ­¢ï¼Œå¹¶æ²¡æœ‰ä¸€ä¸ªç¡®åˆ‡çš„","title":"äº‘åŸç”Ÿçš„å®šä¹‰"},{"content":"å®‰è£…Golang åœ¨Golangå®˜ç½‘ç½‘ç«™å³å¯å®Œæˆä¸‹è½½ï¼Œé“¾æ¥ï¼šhttps://go.dev/dl/\nWindowsä¸‹å¯ä»¥ä½¿ç”¨ .msi åç¼€(åœ¨ä¸‹è½½åˆ—è¡¨ä¸­å¯ä»¥æ‰¾åˆ°è¯¥æ–‡ä»¶ï¼Œå¦‚go1.19.2.windows-amd64.msi)çš„å®‰è£…åŒ…æ¥å®‰è£…ã€‚\nlinuxä¸‹å®‰è£…ç¤ºä¾‹\nwget https://go.dev/dl/go1.19.4.linux-amd64.tar.gz tar -C ~/Ruff/ -xzf go1.19.4.linux-amd64.tar.gz å®‰è£…å®Œæˆåï¼Œåœ¨å¯¹åº”å®‰è£…ç›®å½•çš„ xxx\\bin ç›®å½•ä¸‹æ‰“å¼€cmd, è¾“å…¥go versionå‘½ä»¤è¿”å›go version go1.19 windows/amd64å³è¡¨ç¤ºå®‰è£…å®Œæˆã€‚\né…ç½®ç¯å¢ƒå˜é‡ ä¸ºæ–¹ä¾¿ä½¿ç”¨ï¼Œæˆ‘ä»¬éœ€è¦é…ç½®golangå¯¹åº”çš„ç¯å¢ƒå˜é‡\næ–°å»ºç¯å¢ƒå˜é‡GO_HOME: D:\\GO\\SDK\nç¼–è¾‘pathå˜é‡ï¼Œæ–°å¢ %GO_HOME%\\bin\nlinuxä¸‹ ç¼–è¾‘ ~/.bash_profile æˆ–è€… /etc/profile\nexport PATH=$PATH:/usr/local/go/bin æ·»åŠ åéœ€è¦æ‰§è¡Œ\nsource ~/.bash_profile æˆ– source /etc/profile Golandå®‰è£… å®˜ç½‘ä¸‹è½½æœ€æ–°ç‰ˆæœ¬https://www.jetbrains.com/go/download/\næœ‰æ¡ä»¶çš„å¯ä»¥æ”¯æŒæ­£ç‰ˆ\næ— æ¡ä»¶çš„å‚è€ƒç ´è§£æ”»ç•¥\nGo ç§æœ‰ä»“åº“é…ç½® go envè®¾ç½®\nå›½å†…ä»“åº“åœ°å€\ngo env -w GOPROXY=https://goproxy.cn,direct ç§æœ‰ä»“åº“åœ°å€\ngo env -w GOPRIVATE=gitlab.xxx.xxx è‹¥ç§ä»“ä¸ºhttpåˆ™è®¾ç½®ï¼Œå¦åˆ™CAè¯ä¹¦éªŒè¯ä¸é€šè¿‡æŠ¥é”™\ngo env -w GOINSECURE gitlab.xxx.xxx gité…ç½® ä½¿ç”¨ssh\ngit config --global --add url.\u0026#34;ssh://xxxxx/\u0026#34;.insteadOf \u0026#34;http://xxxxxx/\u0026#34; ","permalink":"http://localhost:1313/posts/raiders/%E4%B8%AD%E6%96%87%E8%B7%AF%E5%BE%84/","summary":"å®‰è£…Golang åœ¨Golangå®˜ç½‘ç½‘ç«™å³å¯å®Œæˆä¸‹è½½ï¼Œé“¾æ¥ï¼šhttps://go.dev/dl/ Windowsä¸‹å¯ä»¥ä½¿ç”¨ .msi åç¼€(åœ¨ä¸‹è½½åˆ—è¡¨ä¸­å¯","title":"Golang ç¯å¢ƒå®‰è£…"},{"content":"nodeç»“æ„ä½“ type node struct { path string // å½“å‰èŠ‚ç‚¹ç›¸å¯¹è·¯å¾„ï¼ˆä¸ç¥–å…ˆèŠ‚ç‚¹çš„ path æ‹¼æ¥å¯å¾—åˆ°å®Œæ•´è·¯å¾„ï¼‰ indices string // æ‰€ä»¥å­©å­èŠ‚ç‚¹çš„path[0]ç»„æˆçš„å­—ç¬¦ä¸² wildChild bool // å­©å­èŠ‚ç‚¹æ˜¯å¦æœ‰é€šé…ç¬¦ï¼ˆwildcardï¼‰ nType nodeType // èŠ‚ç‚¹ç±»å‹ priority uint32 // å½“å‰èŠ‚ç‚¹åŠå­å­™èŠ‚ç‚¹çš„å®é™…è·¯ç”±æ•°é‡ children []*node // å­©å­èŠ‚ç‚¹ handlers HandlersChain // å½“å‰èŠ‚ç‚¹çš„å¤„ç†å‡½æ•°ï¼ˆåŒ…æ‹¬ä¸­é—´ä»¶ï¼‰ fullPath string // å½“å‰èŠ‚ç‚¹å®Œæ•´è·¯å¾„ } è¯·æ±‚è·¯ç”± r.GET(\u0026#34;/\u0026#34;, func (context *gin.Context) {}) r.GET(\u0026#34;/index\u0026#34;, func (context *gin.Context) {}) r.GET(\u0026#34;/inter\u0026#34;, func (context *gin.Context) {}) r.GET(\u0026#34;/go\u0026#34;, func (context *gin.Context) {}) r.GET(\u0026#34;/game/:id/doc\u0026#34;, func (context *gin.Context) {}) gin.nodeç»“æ„ Ginçš„è·¯ç”±å®ç°ä½¿ç”¨äº†ç±»ä¼¼å‰ç¼€æ ‘çš„æ•°æ®ç»“æ„ï¼Œåªéœ€éå†ä¸€éå­—ç¬¦ä¸²å³å¯ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(n)ã€‚\nflowchart TB / --\u003e in / --\u003e g in --\u003e dex in --\u003e ter g --\u003e o g --\u003e ame ame --\u003e :id :id --\u003e doc\rclassDiagram Engine \u003c-- methodTree methodTree \u003c-- node class Engine{ +[]methodTree methodTrees +addRoute() +Handler() +Run() } class methodTree{ -string method -*node root } class node{ +string path +bool wildChild +uint8 nType +[]node children }\rhandlers handlersé‡Œå­˜å‚¨äº†è¯¥èŠ‚ç‚¹å¯¹åº”è·¯ç”±ä¸‹çš„æ‰€æœ‰å¤„ç†å‡½æ•°ï¼Œå¤„ç†ä¸šåŠ¡é€»è¾‘æ—¶æ˜¯è¿™æ ·çš„\n// Next should be used only inside middleware. // It executes the pending handlers in the chain inside the calling handler. // See example in GitHub. func (c *Context) Next() { c.index++ for c.index \u0026lt; int8(len(c.handlers)) { c.handlers[c.index](c) c.index++ } } ","permalink":"http://localhost:1313/posts/tech/go_gin/","summary":"nodeç»“æ„ä½“ type node struct { path string // å½“å‰èŠ‚ç‚¹ç›¸å¯¹è·¯å¾„ï¼ˆä¸ç¥–å…ˆèŠ‚ç‚¹çš„ path æ‹¼æ¥å¯å¾—åˆ°å®Œæ•´è·¯å¾„ï¼‰ indices string // æ‰€ä»¥å­©å­èŠ‚ç‚¹çš„path[0]ç»„æˆçš„å­—ç¬¦ä¸² wildChild bool // å­©å­èŠ‚ç‚¹","title":"Go_gin"},{"content":"å…³äºæˆ‘\n\u0026hellip;\n","permalink":"http://localhost:1313/about/","summary":"å…³äºæˆ‘ \u0026hellip;","title":"ğŸ™‹ğŸ»â€â™‚ï¸å…³äº"},{"content":"","permalink":"http://localhost:1313/posts/raiders/python_env/","summary":"","title":"Pythonç¯å¢ƒå®‰è£…"}]